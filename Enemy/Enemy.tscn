[gd_scene load_steps=15 format=3 uid="uid://cu0iyt20pk40w"]

[ext_resource type="Script" uid="uid://cbp87gphvl7u3" path="res://Enemy/Enemy.cs" id="1_3o4wt"]
[ext_resource type="Script" uid="uid://bi0hm1ocucfro" path="res://Enemy/VisionCone.cs" id="3_uxjip"]
[ext_resource type="Script" uid="uid://n7ncbwq8ebrb" path="res://Player/Composites/Animator.cs" id="3_vonkd"]
[ext_resource type="Script" uid="uid://c7whf6p3ya2sc" path="res://Enemy/StateMachine.cs" id="4_fkela"]
[ext_resource type="Script" uid="uid://cybgyr37hht0y" path="res://Player/Children/AttackArea.cs" id="4_kvarv"]
[ext_resource type="PackedScene" uid="uid://vchx108v0okk" path="res://Enemy/EnemyModel.tscn" id="4_vso2s"]
[ext_resource type="Script" uid="uid://dkknl66n7636l" path="res://Types/States/IdleState.cs" id="5_jd4ap"]
[ext_resource type="Script" uid="uid://bl0mb3mpwfrfn" path="res://Types/States/FollowState.cs" id="7_jd4ap"]
[ext_resource type="Script" uid="uid://dn7r3or7ikdxl" path="res://Types/States/PushbackState.cs" id="7_uxjip"]
[ext_resource type="Script" uid="uid://dq6eqfl1pnekr" path="res://Types/States/AttackState.cs" id="8_1ypri"]

[sub_resource type="BoxShape3D" id="BoxShape3D_epr5s"]
size = Vector3(1, 1.85986, 0.448975)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_1ypri"]
data = PackedVector3Array(0, 0, -1, 0.1951, 0, -0.9808, 0, 2, 0, 0.1951, 0, -0.9808, 0.3827, 0, -0.9239, 0, 2, 0, 0.3827, 0, -0.9239, 0.5556, 0, -0.8315, 0, 2, 0, 0.5556, 0, -0.8315, 0.7071, 0, -0.7071, 0, 2, 0, 0.7071, 0, -0.7071, 0.8314, 0, -0.5556, 0, 2, 0, 0.8314, 0, -0.5556, 0.9239, 0, -0.3827, 0, 2, 0, 0.9239, 0, -0.3827, 0.9808, 0, -0.1951, 0, 2, 0, 0.9808, 0, -0.1951, 1, 0, 0, 0, 2, 0, 1, 0, 0, 0.9808, 0, 0.1951, 0, 2, 0, 0.9808, 0, 0.1951, 0.9239, 0, 0.3827, 0, 2, 0, 0.9239, 0, 0.3827, 0.8314, 0, 0.5556, 0, 2, 0, 0.8314, 0, 0.5556, 0.7071, 0, 0.7071, 0, 2, 0, 0.7071, 0, 0.7071, 0.5556, 0, 0.8314, 0, 2, 0, 0.5556, 0, 0.8314, 0.3827, 0, 0.9239, 0, 2, 0, 0.3827, 0, 0.9239, 0.1951, 0, 0.9808, 0, 2, 0, 0.1951, 0, 0.9808, 0, 0, 1, 0, 2, 0, 0, 0, 1, -0.1951, 0, 0.9808, 0, 2, 0, -0.1951, 0, 0.9808, -0.3827, 0, 0.9239, 0, 2, 0, -0.3827, 0, 0.9239, -0.5556, 0, 0.8314, 0, 2, 0, -0.5556, 0, 0.8314, -0.7071, 0, 0.7071, 0, 2, 0, -0.7071, 0, 0.7071, -0.8315, 0, 0.5556, 0, 2, 0, -0.8315, 0, 0.5556, -0.9239, 0, 0.3827, 0, 2, 0, -0.9239, 0, 0.3827, -0.9808, 0, 0.1951, 0, 2, 0, -0.9808, 0, 0.1951, -1, 0, 0, 0, 2, 0, -1, 0, 0, -0.9808, 0, -0.1951, 0, 2, 0, -0.9808, 0, -0.1951, -0.9239, 0, -0.3827, 0, 2, 0, -0.9239, 0, -0.3827, -0.8315, 0, -0.5556, 0, 2, 0, -0.8315, 0, -0.5556, -0.7071, 0, -0.7071, 0, 2, 0, -0.7071, 0, -0.7071, -0.5556, 0, -0.8315, 0, 2, 0, -0.5556, 0, -0.8315, -0.3827, 0, -0.9239, 0, 2, 0, -0.1951, 0, -0.9808, 0.1951, 0, -0.9808, 0, 0, -1, 0.1951, 0, -0.9808, 0.5556, 0, -0.8315, 0.3827, 0, -0.9239, -0.1951, 0, -0.9808, 0.5556, 0, -0.8315, 0.1951, 0, -0.9808, 0.5556, 0, -0.8315, 0.8314, 0, -0.5556, 0.7071, 0, -0.7071, 0.5556, 0, -0.8315, 0.9808, 0, -0.1951, 0.8314, 0, -0.5556, 0.8314, 0, -0.5556, 0.9808, 0, -0.1951, 0.9239, 0, -0.3827, -0.1951, 0, -0.9808, 0.9808, 0, -0.1951, 0.5556, 0, -0.8315, 0.9808, 0, -0.1951, 0.9808, 0, 0.1951, 1, 0, 0, 0.9808, 0, -0.1951, 0.8314, 0, 0.5556, 0.9808, 0, 0.1951, 0.9808, 0, 0.1951, 0.8314, 0, 0.5556, 0.9239, 0, 0.3827, 0.9808, 0, -0.1951, 0.1951, 0, 0.9808, 0.8314, 0, 0.5556, -0.1951, 0, -0.9808, 0.1951, 0, 0.9808, 0.9808, 0, -0.1951, 0.8314, 0, 0.5556, 0.5556, 0, 0.8314, 0.7071, 0, 0.7071, 0.8314, 0, 0.5556, 0.1951, 0, 0.9808, 0.5556, 0, 0.8314, 0.5556, 0, 0.8314, 0.1951, 0, 0.9808, 0.3827, 0, 0.9239, 0.1951, 0, 0.9808, -0.1951, 0, 0.9808, 0, 0, 1, 0.1951, 0, 0.9808, -0.5556, 0, 0.8314, -0.1951, 0, 0.9808, -0.1951, 0, 0.9808, -0.5556, 0, 0.8314, -0.3827, 0, 0.9239, 0.1951, 0, 0.9808, -0.1951, 0, -0.9808, -0.9808, 0, 0.1951, 0.1951, 0, 0.9808, -0.9808, 0, 0.1951, -0.5556, 0, 0.8314, -0.5556, 0, 0.8314, -0.8315, 0, 0.5556, -0.7071, 0, 0.7071, -0.5556, 0, 0.8314, -0.9808, 0, 0.1951, -0.8315, 0, 0.5556, -0.8315, 0, 0.5556, -0.9808, 0, 0.1951, -0.9239, 0, 0.3827, -0.5556, 0, -0.8315, -0.1951, 0, -0.9808, -0.3827, 0, -0.9239, -0.8315, 0, -0.5556, -0.1951, 0, -0.9808, -0.5556, 0, -0.8315, -0.9808, 0, 0.1951, -0.1951, 0, -0.9808, -0.8315, 0, -0.5556, -0.8315, 0, -0.5556, -0.5556, 0, -0.8315, -0.7071, 0, -0.7071, -0.9808, 0, 0.1951, -0.8315, 0, -0.5556, -0.9808, 0, -0.1951, -0.9808, 0, -0.1951, -0.8315, 0, -0.5556, -0.9239, 0, -0.3827, -0.9808, 0, 0.1951, -0.9808, 0, -0.1951, -1, 0, 0, -0.3827, 0, -0.9239, -0.1951, 0, -0.9808, 0, 2, 0, -0.1951, 0, -0.9808, 0, 0, -1, 0, 2, 0)

[sub_resource type="BoxShape3D" id="BoxShape3D_uxjip"]
size = Vector3(5, 5, 5)

[sub_resource type="BoxShape3D" id="BoxShape3D_kvarv"]
size = Vector3(1, 2.59641, 2.90601)

[node name="Enemy" type="CharacterBody3D" node_paths=PackedStringArray("_bodyContainer", "_animator", "_stateMachine")]
collision_layer = 4
collision_mask = 23
script = ExtResource("1_3o4wt")
_bodyContainer = NodePath("BodyContainer")
_animator = NodePath("Composites/Animator")
_stateMachine = NodePath("StateMachine")

[node name="BodyContainer" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.929932, -0.0140381)
shape = SubResource("BoxShape3D_epr5s")

[node name="EnemyModel" parent="BodyContainer" instance=ExtResource("4_vso2s")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, -0.929932, 0.0140381)

[node name="VisionCone" type="Area3D" parent="BodyContainer" node_paths=PackedStringArray("_stateMachine", "_followState", "_vision", "_sound")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.929932, 0.0140381)
collision_layer = 4
script = ExtResource("3_uxjip")
_stateMachine = NodePath("../../StateMachine")
_followState = NodePath("../../StateMachine/FollowState")
_vision = NodePath("Vision")
_sound = NodePath("Sound")

[node name="Vision" type="CollisionShape3D" parent="BodyContainer/VisionCone"]
transform = Transform3D(10, 0, 0, 0, -4.37114e-07, -10, 0, 10, -4.37114e-07, 0, 1.15662, -20.1683)
shape = SubResource("ConcavePolygonShape3D_1ypri")

[node name="Sound" type="CollisionShape3D" parent="BodyContainer/VisionCone"]
shape = SubResource("BoxShape3D_uxjip")

[node name="AttackArea" type="Area3D" parent="BodyContainer" node_paths=PackedStringArray("_collision", "_model")]
script = ExtResource("4_kvarv")
_collision = NodePath("AttackCollision")
_model = NodePath("../EnemyModel")
metadata/_custom_type_script = "uid://cybgyr37hht0y"

[node name="AttackCollision" type="CollisionShape3D" parent="BodyContainer/AttackArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.366287, -2.46741)
shape = SubResource("BoxShape3D_kvarv")
disabled = true

[node name="Composites" type="Node" parent="."]

[node name="Animator" type="Node" parent="Composites" node_paths=PackedStringArray("Model")]
script = ExtResource("3_vonkd")
Model = NodePath("../../BodyContainer/EnemyModel")
metadata/_custom_type_script = "uid://n7ncbwq8ebrb"

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("_initialState")]
script = ExtResource("4_fkela")
_initialState = NodePath("IdleState")

[node name="IdleState" type="Node" parent="StateMachine" node_paths=PackedStringArray("_model", "_enemy", "_animator", "_stateMachine")]
script = ExtResource("5_jd4ap")
_model = NodePath("../../BodyContainer/EnemyModel")
_enemy = NodePath("../..")
_animator = NodePath("../../Composites/Animator")
_stateMachine = NodePath("..")
metadata/_custom_type_script = "uid://dkknl66n7636l"

[node name="FollowState" type="Node" parent="StateMachine" node_paths=PackedStringArray("_enemy", "_animator", "_stateMachine", "_visionArea")]
script = ExtResource("7_jd4ap")
_enemy = NodePath("../..")
_animator = NodePath("../../Composites/Animator")
_stateMachine = NodePath("..")
_visionArea = NodePath("../../BodyContainer/VisionCone")
metadata/_custom_type_script = "uid://bl0mb3mpwfrfn"

[node name="PushbackState" type="Node" parent="StateMachine" node_paths=PackedStringArray("_enemy", "_stateMachine")]
script = ExtResource("7_uxjip")
_enemy = NodePath("../..")
_stateMachine = NodePath("..")
metadata/_custom_type_script = "uid://dn7r3or7ikdxl"

[node name="AttackState" type="Node" parent="StateMachine" node_paths=PackedStringArray("_model", "_enemy", "_stateMachine", "_animator")]
script = ExtResource("8_1ypri")
_model = NodePath("../../BodyContainer/EnemyModel")
_enemy = NodePath("../..")
_stateMachine = NodePath("..")
_animator = NodePath("../../Composites/Animator")
metadata/_custom_type_script = "uid://dq6eqfl1pnekr"
